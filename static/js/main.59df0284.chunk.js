(this.webpackJsonptrellotube=this.webpackJsonptrellotube||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(17),i=n.n(a),c=(n(55),n(4)),u=n(7),d=n(3),l=100,s=function(){return l+++""},m=!1,p=function(){var e={boards:{BOARD_1:{boardId:"BOARD_1",boardName:"My Board",columns:{1:{id:"1",items:[{text:"Album 1",id:s(),videoId:"1",imageUrl:"https://i.ytimg.com/vi/6Zo_FTUNDBI/mqdefault.jpg"},{text:"Album 2",id:s(),videoId:"1",imageUrl:"https://i.ytimg.com/vi/-xj2BmxEkcI/mqdefault.jpg"},{text:"Album 3",id:s(),videoId:"1",imageUrl:"https://i.ytimg.com/vi/ZchNI8bEnoY/mqdefault.jpg"}],name:"First",type:"PLAYLIST"},2:{id:"2",items:[{text:"Title 2",id:s(),videoId:"1",imageUrl:""},{text:"Title 3",id:s(),videoId:"1",imageUrl:""},{text:"Title 4",id:s(),videoId:"1",imageUrl:""},{text:"Title 5",id:s(),videoId:"1",imageUrl:""},{text:"Title 6",id:s(),videoId:"1",imageUrl:""}],name:"Second",type:"PLAYLIST"},3:{id:"3",items:[{text:"Album 1.1",id:s(),videoId:"1",imageUrl:""},{text:"Album 2.2",id:s(),videoId:"1",imageUrl:""},{text:"Album 3.3",id:s(),videoId:"1",imageUrl:""}],name:"Third",type:"SEARCH"},SEARCH:{id:"SEARCH",items:[],name:"SEARCH",type:"SEARCH"}},columnOrders:["1","2","3"]},BOARD_2:{boardName:"ANOTHER BOARd",boardId:"BOARD_2",columns:{SEARCH:{id:"SEARCH",items:[],name:"SEARCH",type:"SEARCH"}},columnOrders:[]}},boardsOrder:["BOARD_1","BOARD_2"],selectedBoard:"BOARD_1"};if(!m){m=!0;var t=localStorage.getItem("MY_STORAGE");t&&(e=JSON.parse(t))}var n=Object(r.useState)(e),o=Object(d.a)(n,2),a=o[0],i=o[1];return[a,function(e){localStorage.setItem("MY_STORAGE",JSON.stringify(e)),i(e)}]},f=n(5),b=n(6),O=n(20);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e,t){return e.columns[t]},h=function(e,t){return e.columns[t.droppableId].items[t.index]},j=function(e,t,n){var r=y(e,t),o=Object(O.a)(r.items);return o.splice(n,1),x(e,t,o)},E=function(e,t,n,r){var o=y(e,t),a=Object(O.a)(o.items);return a.splice(n,0,r),x(e,t,a)},x=function(e,t,n){return v({},e,{columns:v({},e.columns,Object(u.a)({},t,v({},y(e,t),{items:n})))})};function S(){var e=Object(c.a)(["\n  color: #1e1e1e;\n  padding: 4px;\n"]);return S=function(){return e},e}function P(){var e=Object(c.a)(["\n  width: 100%;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n"]);return P=function(){return e},e}function I(){var e=Object(c.a)(["\n  border-radius: 4px;\n  background-color: white;\n  margin-bottom: 8px;\n"]);return I=function(){return e},e}var w=f.a.div(I()),R=f.a.img(P()),A=f.a.div(S()),D=function(e){var t=e.item,n=e.index,r=e.onPress;return o.a.createElement(b.b,{draggableId:t.id,index:n,type:"item"},(function(e){return o.a.createElement(w,Object.assign({onClick:r,ref:e.innerRef},e.dragHandleProps,e.draggableProps),o.a.createElement(R,{src:t.imageUrl}),o.a.createElement(A,null,(n=t.text,(new DOMParser).parseFromString("<!doctype html><body>"+n,"text/html").body.textContent)));var n}))};function k(){var e=Object(c.a)(["\n  background-color: ",";\n  flex-grow: 1;\n  min-height: 50px;\n"]);return k=function(){return e},e}function C(){var e=Object(c.a)(["\n  margin-bottom: 0;\n  padding: 8px;\n\n  display: flex;\n  justify-content: space-between;\n"]);return C=function(){return e},e}function B(){var e=Object(c.a)(["\n  background-color: lightgrey;\n  margin-left: 8px;\n  border-radius: 2px;\n  width: 220px;\n  display: flex;\n  flex-direction: column;\n  padding-left: 8px;\n  padding-right: 8px;\n  &:hover "," {\n    display: inherit;\n  }\n"]);return B=function(){return e},e}function T(){var e=Object(c.a)(["\n  display: none;\n"]);return T=function(){return e},e}var H=f.a.div(T()),U=f.a.div(B(),H),_=f.a.h4(C()),L=f.a.div(k(),(function(e){return e.isDraggingOver?"skyblue":"lightgrey"})),N=function(e){var t=e.column,n=e.index,a=e.onDelete,i=e.renameColumn,c=e.onPlay,u=Object(r.useState)(!1),l=Object(d.a)(u,2),s=l[0],m=l[1],p=Object(r.useState)(t.name),f=Object(d.a)(p,2),O=f[0],g=f[1],v=function(){s&&i(t.id,O),m(!s)};return o.a.createElement(b.b,{draggableId:t.id,index:n},(function(e){return o.a.createElement(U,Object.assign({ref:e.innerRef},e.draggableProps),o.a.createElement(_,e.dragHandleProps,s?o.a.createElement("input",{autoFocus:!0,type:"text",value:O,onChange:function(e){return g(e.target.value)}}):t.name," ",o.a.createElement(H,null,o.a.createElement("button",{onClick:v},"E"),o.a.createElement("button",{onClick:function(){return a(t.id)}},"X"))),o.a.createElement(b.c,{droppableId:t.id,type:"item"},(function(e,n){return o.a.createElement(L,Object.assign({isDraggingOver:n.isDraggingOver,ref:e.innerRef},e.droppableProps),t.items.map((function(e,t){return o.a.createElement(D,{onPress:function(){return c(e.videoId)},index:t,key:e.id,item:e})})),e.placeholder)})))}))};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var F=function(e,t){return console.log("Requesting Youtube ".concat(t," for ").concat(e)),e},M=function(e){return"youtube#video"===e},q={key:"AIzaSyBsCL-zrXWd9S2FKRSDVfz7dOo783LQkLk"},z=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},q);return Object.keys(t).filter((function(e){return"undefined"!==typeof t[e]})).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&")},J=function(e,t){return"https://www.googleapis.com/youtube/v3/".concat(e,"?").concat(z(t))},W=function(e){var t=e.items,n=e.onSearchDone,a=e.onPlay,i=Object(r.useState)(""),c=Object(d.a)(i,2),u=c[0],l=c[1],s=function(e,t){var n=Object(r.useState)(e),o=Object(d.a)(n,2),a=o[0],i=o[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){i(e)}),t);return function(){clearTimeout(n)}}),[e,t]),a}(u,600);return Object(r.useEffect)((function(){s&&function(e,t){return fetch(J("search",{part:"snippet",shart:"mostPopular",maxResults:10,pageToken:t,q:F(e,"search")})).then((function(e){return e.json()})).then((function(e){return{items:e.items.filter((function(e){return M(e.id.kind)})).map((function(e){return{videoId:e.id.videoId||"",imageUrl:e.snippet.thumbnails.medium.url,text:e.snippet.title,id:Math.random()+""}}))}}))}(s).then((function(e){return n(e.items)}))}),[s]),o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{"data-testid":"search-input",type:"text",value:u,onChange:function(e){return l(e.target.value)}}),o.a.createElement(b.c,{droppableId:"SEARCH",type:"item"},(function(e,n){return o.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),t.map((function(e,t){return o.a.createElement(D,{onPress:function(){return a(e.videoId)},key:e.id,index:t,item:e})})))})))};function G(){var e=Object(c.a)(["\n  overflow: scroll;\n  position: fixed;\n  width: 200px;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 200px;\n  background-color: white;\n  border-right: solid 1px #70797e;\n"]);return G=function(){return e},e}function V(){var e=Object(c.a)([""]);return V=function(){return e},e}function X(){var e=Object(c.a)([""]);return X=function(){return e},e}var Z=function(e){var t=e.onSelectBoard,n=e.board,r=e.isSelected?K:Q;return o.a.createElement("div",null,o.a.createElement(r,{"data-testid":"board-"+n.boardId,onClick:function(){return t(n.boardId)}},n.boardName))},K=f.a.h2(X()),Q=f.a.h4(V()),$=function(e){var t=e.app,n=e.onSearchDone,a=e.onSelectBoard,i=e.onPlay,c=Object(r.useState)("search"),u=Object(d.a)(c,2),l=u[0],s=u[1];return o.a.createElement(ee,null,o.a.createElement("button",{"data-testid":"boards-button",onClick:function(){return s("board")}},"boards"),o.a.createElement("button",{"data-testid":"search-button",onClick:function(){return s("search")}},"search"),"search"===l?o.a.createElement(W,{onPlay:i,items:t.boards[t.selectedBoard].columns.SEARCH.items,onSearchDone:n}):o.a.createElement("div",{"data-testid":"board-view"},t.boardsOrder.map((function(e){return o.a.createElement(Z,{key:e,onSelectBoard:a,isSelected:e===t.selectedBoard,board:t.boards[e]})}))))},ee=f.a.div(G()),te=n(45),ne=function(e){return o.a.createElement("div",{style:re},o.a.createElement(te.a,Object.assign({},e,{onReady:function(t){return e.onReady(t.target)},onEnd:e.onEnd,"data-testid":"player",opts:{height:"150",width:"400",playerVars:{autoplay:1}}})))},re={position:"fixed",right:15,bottom:15},oe=function(e){var t=e.videoId,n=e.onEnd,a=Object(r.useState)(),i=Object(d.a)(a,2),c=(i[0],i[1]);return t?o.a.createElement(ne,{onReady:c,videoId:t,onEnd:n}):null};function ae(){var e=Object(c.a)(["\n  min-height: calc(100vh - 16px);\n  min-width: calc(100vh - 8px);\n  display: inline-flex;\n  align-items: flex-start;\n  //to balance for margin-left of the rightmost item\n  margin: 8px 8px 8px 200px;\n"]);return ae=function(){return e},e}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=f.a.div(ae()),de=function(){var e=p(),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(),c=Object(d.a)(i,2),l=c[0],s=c[1],m=function(e){a(ce({},n,{boards:ce({},n.boards,Object(u.a)({},e.boardId,e))}))},f=n.boards[n.selectedBoard],g=function(e){var t=ce({},f.columns);delete t[e],m(ce({},f,{columnOrders:f.columnOrders.filter((function(t){return t!==e})),columns:t}))},y=function(){var e={items:[],name:"New Column",id:Math.random()+"",type:"PLAYLIST"};m(ce({},f,{columnOrders:f.columnOrders.concat([e.id]),columns:ce({},f.columns,Object(u.a)({},e.id,e))}))},x=function(e,t){m(ce({},f,{columns:ce({},f.columns,Object(u.a)({},e,ce({},n.boards[n.selectedBoard].columns[e],{name:t})))}))};return o.a.createElement(b.a,{onDragEnd:function(e){m(function(e,t){var n=t.destination,r=t.source;if(!n)return e;if(n.droppableId===r.droppableId&&n.index===r.index)return e;if("board"===r.droppableId){var o=Object(O.a)(e.columnOrders);return o.splice(r.index,1),o.splice(n.index,0,t.draggableId),v({},e,{columnOrders:o})}var a=h(e,r),i=j(e,r.droppableId,r.index);return E(i,n.droppableId,n.index,a)}(f,e))}},o.a.createElement($,{onPlay:s,app:n,onSearchDone:function(e){m(ce({},f,{columns:ce({},f.columns,{SEARCH:ce({},f.columns.SEARCH,{items:e})})}))},onSelectBoard:function(e){a(ce({},n,{selectedBoard:e}))}}),o.a.createElement(b.c,{droppableId:"board",direction:"horizontal",type:"column"},(function(e){return o.a.createElement(ue,Object.assign({ref:e.innerRef},e.droppableProps),f.columnOrders.map((function(e,t){return o.a.createElement(N,{onPlay:s,key:e,onDelete:g,column:f.columns[e],index:t,renameColumn:x})})),e.placeholder,o.a.createElement("button",{onClick:y},"+ Playlist"))})),o.a.createElement(oe,{videoId:l,onEnd:function(){return console.log("on video end, TODO: play next track")}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},50:function(e,t,n){e.exports=n(106)},55:function(e,t,n){}},[[50,1,2]]]);
//# sourceMappingURL=main.59df0284.chunk.js.map