(this.webpackJsonptrellotube=this.webpackJsonptrellotube||[]).push([[0],{114:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(19),i=n.n(a),c=(n(61),n(9)),d=n(6),u=n(7),l={STACK_WIDTH:220,STACK_PADDING:8,CARD_IMAGE_WIDTH:74,CARD_IMAGE_HEIGHT:41.625,CARD_HEIGHT:41.625,CARD_WIDTH:204,CARD_TEXT_WIDTH:146,BORDER_RADIUS:4,SIDEBAR_WIDTH:236};function s(){var e=Object(d.a)(["\n  color: #1e1e1e;\n  font-size: 14px;\n  \n  display: flex;\n  align-items: center;\n  padding-left: ","px;\n  width: ","px;\n  height: ","px;\n"]);return s=function(){return e},e}function p(){var e=Object(d.a)(["\n  width: ","px;\n  height: ","px;\n  border-top-left-radius: ","px;\n  border-bottom-left-radius: ","px;\n"]);return p=function(){return e},e}function m(){var e=Object(d.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: row;\n  border-radius: ","px;\n  background-color: white;\n  margin-bottom: ","px;\n  box-shadow: 0 2px 1px -1px gray;\n"]);return m=function(){return e},e}function f(){var e=Object(d.a)(["\n  margin-bottom: 0;\n  padding-left: ","px;\n  padding-bottom: ","px;\n\n  display: flex;\n  justify-content: space-between;\n"]);return f=function(){return e},e}function b(){var e=Object(d.a)(["\n  display: inline-flex;\n  align-items: flex-start;\n  //to balance for margin-left of the rightmost item\n  margin: 8px 8px 8px ","px;\n"]);return b=function(){return e},e}function O(){var e=Object(d.a)(["\n  background-color: ",";\n  flex-grow: 1;\n  min-height: 50px;\n"]);return O=function(){return e},e}function E(){var e=Object(d.a)(["\n  background-color: lightgrey;\n  margin-left: 8px;\n  border-radius: ","px;\n  width: ","px;\n  display: flex;\n  flex-direction: column;\n  padding-left: ","px;\n  padding-right: ","px;\n  &:hover "," {\n    display: inherit;\n  }\n"]);return E=function(){return e},e}function g(){var e=Object(d.a)(["\n  display: none;\n"]);return g=function(){return e},e}var v,y=u.a.div(g()),A=u.a.div(E(),l.BORDER_RADIUS,l.STACK_WIDTH,l.STACK_PADDING,l.STACK_PADDING,y),R=u.a.div(O(),(function(e){return e.isDraggingOver,"lightgrey"})),D=u.a.div(b(),l.SIDEBAR_WIDTH),I=u.a.h4(f(),l.STACK_PADDING,l.STACK_PADDING),j=u.a.div(m(),l.BORDER_RADIUS,l.STACK_PADDING),h=u.a.img(p(),l.CARD_IMAGE_WIDTH,l.CARD_IMAGE_HEIGHT,l.BORDER_RADIUS,l.BORDER_RADIUS),_=u.a.div(s(),l.STACK_PADDING,l.CARD_TEXT_WIDTH,l.CARD_HEIGHT),x=n(44),C=function(e){var t=e.item,n=e.index,r=e.onPress;return o.a.createElement(c.b,{draggableId:t.id,index:n,type:"item"},(function(e){return o.a.createElement(j,Object.assign({"data-testid":"video-"+t.id,onClick:r,ref:e.innerRef},e.dragHandleProps,e.draggableProps),o.a.createElement(h,{src:t.imageUrl}),o.a.createElement(_,null,o.a.createElement(x.a,{width:136,lines:2},(n=t.text,(new DOMParser).parseFromString("<!doctype html><body>"+n,"text/html").body.textContent||""))));var n}))};!function(e){e.PLAY="PLAY"}(v||(v={}));var S,T=function(e){return{type:v.PLAY,videoId:e}},P=n(3),B=n(8),w=function(e){var t=e.id,n=e.label,a=e.onRename,i=e.onRemove,c=e.dragHandleProps,d=e.testIdGroupName,u=e.Title,l=e.Options,s=Object(r.useState)(!1),p=Object(B.a)(s,2),m=p[0],f=p[1],b=Object(r.useState)(n),O=Object(B.a)(b,2),E=O[0],g=O[1],v=function(){f(!1),a(t,E)};return o.a.createElement(u,Object.assign({},c,{"data-testid":"".concat(d,"-")+t}),m?o.a.createElement("input",{autoFocus:!0,onKeyPress:function(e){return"Enter"===e.key&&v()},onBlur:v,type:"text",value:E,"data-testid":"".concat(d,"-input-")+t,onChange:function(e){return g(e.target.value)}}):o.a.createElement("div",{"data-testid":"".concat(d,"-title-")+t},n),o.a.createElement(l,null,o.a.createElement("button",{"data-testid":"".concat(d,"-rename-")+t,onClick:function(e){e.stopPropagation(),m&&a(t,E),f(!m)}},"E"),o.a.createElement("button",{"data-testid":"".concat(d,"-remove-")+t,onClick:function(e){e.stopPropagation(),i(t)}},"X")))};!function(e){e.REMOVE_COLUMN="REMOVE_COLUMN",e.CREATE_COLUMN="CREATE_COLUMN",e.SEARCH_DONE="SEARCH_DONE",e.SELECT_BOARD="SELECT_BOARD",e.RENAME_COLUMN="RENAME_COLUMN",e.DRAG_END="DRAG_END",e.CREATE_BOARD="CREATE_BOARD",e.REMOVE_BOARD="REMOVE_BOARD",e.RENAME_BOARD="RENAME_BOARD",e.RESET="RESET"}(S||(S={}));var N=function(e){return{type:S.SELECT_BOARD,boardId:e}},H=Object(P.b)(null,{play:T,renameColumn:function(e,t){return{type:S.RENAME_COLUMN,columnId:e,newName:t}},removeColumn:function(e){return{type:S.REMOVE_COLUMN,columnId:e}}})((function(e){var t=e.column,n=e.index,r=e.play,a=e.removeColumn,i=e.renameColumn;return o.a.createElement(c.b,{draggableId:t.id,index:n},(function(e){return o.a.createElement(A,Object.assign({"data-testid":"column-"+t.id,ref:e.innerRef},e.draggableProps),o.a.createElement(w,{dragHandleProps:e.dragHandleProps,label:t.name,id:t.id,onRename:i,onRemove:a,testIdGroupName:"column-label",Title:I,Options:y}),o.a.createElement(c.c,{droppableId:t.id,type:"item"},(function(e,n){return o.a.createElement(R,Object.assign({isDraggingOver:n.isDraggingOver,ref:e.innerRef},e.droppableProps),t.items.map((function(e,t){return o.a.createElement(C,{onPress:function(){return r(e.videoId)},index:t,key:e.id,item:e})})),e.placeholder)})))}))}));var M=n(5);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var U=function(e,t){return console.log("Requesting Youtube ".concat(t," for ").concat(e)),e},L=function(e){return"youtube#video"===e},G={key:"AIzaSyBsCL-zrXWd9S2FKRSDVfz7dOo783LQkLk"},Y=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(M.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},G);return Object.keys(t).filter((function(e){return"undefined"!==typeof t[e]})).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&")},K=function(e,t){return"https://www.googleapis.com/youtube/v3/".concat(e,"?").concat(Y(t))},W=Object(P.b)((function(e){return{items:e.boards[e.selectedBoard].columns.SEARCH.items}}),{play:T,searchDone:function(e){return{type:S.SEARCH_DONE,items:e}}})((function(e){var t=e.items,n=e.searchDone,a=e.play,i=Object(r.useState)(""),d=Object(B.a)(i,2),u=d[0],l=d[1],s=function(e,t){var n=Object(r.useState)(e),o=Object(B.a)(n,2),a=o[0],i=o[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){i(e)}),t);return function(){clearTimeout(n)}}),[e,t]),a}(u,600);return Object(r.useEffect)((function(){s&&function(e,t){return fetch(K("search",{part:"snippet",shart:"mostPopular",maxResults:10,pageToken:t,q:U(e,"search")})).then((function(e){return e.json()})).then((function(e){return{items:e.items.filter((function(e){return L(e.id.kind)})).map((function(e){return{videoId:e.id.videoId||"",imageUrl:e.snippet.thumbnails.medium.url,text:e.snippet.title,id:Math.random()+""}}))}}))}(s).then((function(e){return n(e.items)}))}),[s]),o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{"data-testid":"search-input",type:"text",value:u,onChange:function(e){return l(e.target.value)}}),o.a.createElement(c.c,{droppableId:"SEARCH",type:"item"},(function(e,n){return o.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),t.map((function(e,t){return o.a.createElement(C,{onPress:function(){return a(e.videoId)},key:e.id,index:t,item:e})})))})))}));function V(){var e=Object(d.a)(["\n  overflow: scroll;\n  position: fixed;\n  width: ","px;\n  box-sizing: border-box;\n  padding-left: ","px;\n  padding-right: ","px;\n  background-color: lightgrey;\n  top: 0;\n  left: 0;\n  bottom: 0;\n"]);return V=function(){return e},e}function F(){var e=Object(d.a)(["\n  cursor: pointer;\n  &:hover {\n    background-color: lightpink;\n  }\n  padding-left: 20px;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  color: ",";\n  &:hover "," {\n    display: inherit;\n  }\n"]);return F=function(){return e},e}function z(){var e=Object(d.a)(["\n  display: none;\n"]);return z=function(){return e},e}var q=u.a.div(z()),J=u.a.div(F(),(function(e){return e.isSelected?"purple":"black"}),q),X=u.a.div(V(),l.SIDEBAR_WIDTH,l.STACK_PADDING,l.STACK_PADDING),Z=Object(P.b)((function(e){return{app:e}}),{selectBoard:N,createAndSelectNewBoard:function(){var e=Math.random()+"";return{type:S.CREATE_BOARD,boardId:e}},renameBoard:function(e,t){return{type:S.RENAME_BOARD,boardId:e,newText:t}},removeBoard:function(e){return{type:S.REMOVE_BOARD,boardId:e}}})((function(e){var t=e.app,n=e.selectBoard,r=e.createAndSelectNewBoard,a=e.renameBoard,i=e.removeBoard;return o.a.createElement("div",{"data-testid":"board-view"},t.boardsOrder.map((function(e){return o.a.createElement(w,{dragHandleProps:{isSelected:e===t.selectedBoard,onClick:function(){return n(e)}},id:e,key:e,testIdGroupName:"board-button",label:t.boards[e].boardName,onRename:a,onRemove:i,Title:J,Options:q})})),o.a.createElement("button",{"data-testid":"create-board-button",onClick:r},"create"))})),Q=function(){var e=Object(r.useState)("search"),t=Object(B.a)(e,2),n=t[0],a=t[1];return o.a.createElement(X,null,o.a.createElement("button",{"data-testid":"boards-button",onClick:function(){return a("board")}},"boards"),o.a.createElement("button",{"data-testid":"search-button",onClick:function(){return a("search")}},"search"),"search"===n?o.a.createElement(W,null):o.a.createElement(Z,null))},$=n(49),ee=function(e){return o.a.createElement("div",{style:te},o.a.createElement($.a,Object.assign({},e,{onReady:function(t){return e.onReady(t.target)},onEnd:e.onEnd,opts:{height:"150",width:"400",playerVars:{autoplay:1}}})))},te={position:"fixed",right:15,bottom:15},ne=Object(P.b)((function(e){return{videoId:e.videoBeingPlayed}}))((function(e){var t=e.videoId,n=e.onEnd,a=Object(r.useState)(),i=Object(B.a)(a,2),c=(i[0],i[1]);return t?o.a.createElement(ee,{onReady:c,videoId:t,onEnd:n}):null})),re=n(22);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach((function(t){Object(M.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=function(e,t){return e.columns[t]},ce=function(e,t){return e.columns[t.droppableId].items[t.index]},de=function(e,t,n){var r=ie(e,t),o=Object(re.a)(r.items);return o.splice(n,1),le(e,t,o)},ue=function(e,t,n,r){var o=ie(e,t),a=Object(re.a)(o.items);return a.splice(n,0,r),le(e,t,a)},le=function(e,t,n){return ae({},e,{columns:ae({},e.columns,Object(M.a)({},t,ae({},ie(e,t),{items:n})))})},se=100,pe=function(){return se+++""},me=function(){return{boards:{BOARD_1:{boardId:"BOARD_1",boardName:"My Board",columns:{1:{id:"1",items:[{text:"Short name",id:pe(),videoId:"1",imageUrl:"https://i.ytimg.com/vi/6Zo_FTUNDBI/mqdefault.jpg"},{text:"Two lines of text but not that long",id:pe(),videoId:"1",imageUrl:"https://i.ytimg.com/vi/-xj2BmxEkcI/mqdefault.jpg"},{text:"A very-very long text with lots of redundant infomation",id:pe(),videoId:"1",imageUrl:"https://i.ytimg.com/vi/ZchNI8bEnoY/mqdefault.jpg"}],name:"First",type:"PLAYLIST"},2:{id:"2",items:[{text:"Title 2",id:"MY_VIDEO_ID",videoId:"YOUTUBE_ID",imageUrl:""},{text:"Title 3",id:pe(),videoId:"1",imageUrl:""},{text:"Title 4",id:pe(),videoId:"1",imageUrl:""},{text:"Title 5",id:pe(),videoId:"1",imageUrl:""},{text:"Title 6",id:pe(),videoId:"1",imageUrl:""}],name:"Second",type:"PLAYLIST"},3:{id:"3",items:[{text:"Album 1.1",id:pe(),videoId:"1",imageUrl:""},{text:"Album 2.2",id:pe(),videoId:"1",imageUrl:""},{text:"Album 3.3",id:pe(),videoId:"1",imageUrl:""}],name:"Third",type:"SEARCH"},SEARCH:{id:"SEARCH",items:[{text:"Title 2",id:"MY_VIDEO_ID_AT_SEARCH",videoId:"YOUTUBE_ID_AT_SEARCH",imageUrl:""}],name:"SEARCH",type:"SEARCH"}},columnOrders:["1","2","3"]},BOARD_2:{boardName:"ANOTHER BOARd",boardId:"BOARD_2",columns:{SEARCH:{id:"SEARCH",items:[],name:"SEARCH",type:"SEARCH"}},columnOrders:[]}},boardsOrder:["BOARD_1","BOARD_2"],selectedBoard:"BOARD_1"}};function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(n,!0).forEach((function(t){Object(M.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=function(e,t,n){return t!==n?t:e.filter((function(e){return e!==t}))[0]},Ee=function(e,t){return be({},e,{boards:be({},e.boards,Object(M.a)({},t.boardId,t))})},ge=function(e,t){var n=JSON.parse(JSON.stringify(me().boards.BOARD_2));return n.boardName="New Board",n.boardId=t,be({},e,Object(M.a)({},t,n))},ve=function(e){return e.boards[e.selectedBoard]},ye=function(e){var t=ve(e);return t?t.columnOrders.map((function(e){return t.columns[e]})):[]},Ae=Object(P.b)((function(e){return{columns:ye(e)}}),{createColumn:function(){return{type:S.CREATE_COLUMN}},selectBoard:N,endDrag:function(e){return{type:S.DRAG_END,dropResult:e}}})((function(e){var t=e.createColumn,n=e.endDrag,r=e.columns;return o.a.createElement(c.a,{onDragEnd:n},o.a.createElement(Q,null),o.a.createElement(c.c,{droppableId:"board",direction:"horizontal",type:"column"},(function(e){return o.a.createElement(D,Object.assign({ref:e.innerRef},e.droppableProps),r.map((function(e,t){return o.a.createElement(H,{key:e.id,column:e,index:t})})),e.placeholder,o.a.createElement("button",{"data-testid":"column-create",onClick:t},"+ Playlist"))})),o.a.createElement(ne,{onEnd:function(){return console.log("on video end, TODO: play next track")}}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Re=n(4);function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ie=n(52),je=n(29),he=n(53),_e=n.n(he),xe=Object(Ie.a)(me(),(function(e,t){if(t.type===S.RESET)return me();if(t.type===S.REMOVE_COLUMN){var n=ve(e),r=be({},n.columns);delete r[t.columnId];var o=be({},n,{columnOrders:n.columnOrders.filter((function(e){return e!==t.columnId})),columns:r});return Ee(e,o)}if(t.type===S.CREATE_COLUMN){var a=ve(e),i={items:[],name:"New Column",id:Math.random()+"",type:"PLAYLIST"};return Ee(e,be({},a,{columnOrders:a.columnOrders.concat([i.id]),columns:be({},a.columns,Object(M.a)({},i.id,i))}))}if(t.type===S.SEARCH_DONE){var c=ve(e);return Ee(e,be({},c,{columns:be({},c.columns,{SEARCH:be({},c.columns.SEARCH,{items:t.items})})}))}if(t.type===S.SELECT_BOARD)return be({},e,{selectedBoard:t.boardId});if(t.type===S.RENAME_COLUMN){var d=ve(e);return Ee(e,be({},d,{columns:be({},d.columns,Object(M.a)({},t.columnId,be({},d.columns[t.columnId],{name:t.newName})))}))}if(t.type===S.DRAG_END){var u=ve(e);return Ee(e,function(e,t){var n=t.destination,r=t.source;if(!n)return e;if(n.droppableId===r.droppableId&&n.index===r.index)return e;if("board"===r.droppableId){var o=Object(re.a)(e.columnOrders);return o.splice(r.index,1),o.splice(n.index,0,t.draggableId),ae({},e,{columnOrders:o})}var a=ce(e,r),i=de(e,r.droppableId,r.index);return ue(i,n.droppableId,n.index,a)}(u,t.dropResult))}if(t.type===S.CREATE_BOARD)return be({},e,{boardsOrder:e.boardsOrder.concat([t.boardId]),boards:ge(e.boards,t.boardId),selectedBoard:t.boardId});if(t.type===S.RENAME_BOARD)return be({},e,{boards:be({},e.boards,Object(M.a)({},t.boardId,be({},e.boards[t.boardId],{boardName:t.newText})))});if(t.type===S.REMOVE_BOARD){var l=e.boards;return delete l[t.boardId],be({},e,{boardsOrder:e.boardsOrder.filter((function(e){return e!==t.boardId})),selectedBoard:Oe(e.boardsOrder,e.selectedBoard,t.boardId),boards:l})}return e}),(function(e,t){return t.type===v.PLAY?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(n,!0).forEach((function(t){Object(M.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{videoBeingPlayed:t.videoId}):e})),Ce={key:"MY_CONFIG",storage:_e.a},Se=Object(je.a)(Ce,xe),Te=Object(Re.e)(Se),Pe=(Object(je.b)(Te),o.a.createElement(P.a,{store:Te},o.a.createElement(Ae,null)));i.a.render(Pe,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},56:function(e,t,n){e.exports=n(114)},61:function(e,t,n){}},[[56,1,2]]]);
//# sourceMappingURL=main.415a9fc8.chunk.js.map